<?xml version="1.0" encoding="UTF-8"?>

<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/actionGroupSchema.xsd">
    <actionGroup name="LsSetRequiredBraintreeConfigsActionGroup">
        <annotations>
            <description>Set required configs</description>
        </annotations>
        <amOnPage url="{{AdminConfigPaymentMethodsPage.url}}" stepKey="navigateToPaymentConfigurationPage"/>
        <waitForPageLoad stepKey="waitForConfigPageLoad"/>
        <waitForElementVisible selector="#payment_us_braintree_section_braintree-head .state-closed" stepKey="waitForBraintreeSection"/>

        <click selector ="#payment_us_braintree_section_braintree-head .state-closed" stepKey="clickBraintreeConfigureBtn"/>
        <waitForElementVisible selector="#payment_us_braintree_section_braintree_braintree_required_sandbox_public_key" stepKey="waitForBraintreePublicKeyField"/>
        <waitForElementVisible selector="#payment_us_braintree_section_braintree_braintree_required_sandbox_private_key" stepKey="waitForBraintreePrivateKeyField"/>
        <scrollTo selector="#payment_us_braintree_section_braintree_braintree_required_sandbox_public_key" stepKey="scrollToBottom"/>
        <fillField selector ="#payment_us_braintree_section_braintree_braintree_required_sandbox_public_key" userInput="{{_CREDS.magento/braintree_enabled_public_key}}" stepKey="inputPublicKey"/>
        <fillField selector ="#payment_us_braintree_section_braintree_braintree_required_sandbox_private_key" userInput="{{_CREDS.magento/braintree_enabled_private_key}}" stepKey="inputPrivateKey"/>
        <selectOption selector="#payment_us_braintree_section_braintree_active" userInput="Yes" stepKey="enableCardPayment"/>
        <click selector="{{AdminConfigSection.saveButton}}" stepKey="saveConfig"/>
        <waitForPageLoad stepKey="waitForSaving"/>
        <waitForText selector="{{AdminMessagesSection.success}}" userInput="You saved the configuration." stepKey="seeSuccess"/>
    </actionGroup>
</actionGroups>
